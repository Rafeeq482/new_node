{"ast":null,"code":"// Main App Component\n// Handles routing between authentication and dashboard pages\nimport React,{useState,useEffect}from'react';import{Amplify}from'aws-amplify';import Login from'./components/Login';import Register from'./components/Register';import Dashboard from'./components/Dashboard';import{authService}from'./services/authService';import awsConfig from'./config/awsConfig';import'./App.css';// Configure AWS Amplify with our Cognito settings\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";Amplify.configure(awsConfig);function App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[loading,setLoading]=useState(true);const[currentView,setCurrentView]=useState('login');// 'login' or 'register'\n// Check if user is already authenticated when app loads\nuseEffect(()=>{const checkAuthStatus=async()=>{const authenticated=await authService.isAuthenticated();setIsAuthenticated(authenticated);setLoading(false);};checkAuthStatus();},[]);// Handle successful login\nconst handleLoginSuccess=user=>{console.log('Login successful:',user.username);setIsAuthenticated(true);};// Handle logout\nconst handleLogout=()=>{console.log('User logged out');setIsAuthenticated(false);setCurrentView('login');};// Switch between login and register views\nconst switchToRegister=()=>setCurrentView('register');const switchToLogin=()=>setCurrentView('login');// Show loading spinner while checking authentication\nif(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]})});}// // Simulate a 404 error for testing rollback\n// const simulate404 = true;\n// if (simulate404) {\n//   // This will render a 404-style error in the UI\n//   return (\n//     <div className=\"app\">\n//       <div className=\"error-page\">\n//         <h1>404 - Page Not Found</h1>\n//         <p>This page does not exist (simulated error for rollback).</p>\n//       </div>\n//     </div>\n//   );\n// }\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"app\",children:isAuthenticated?/*#__PURE__*/// Show dashboard for authenticated users\n_jsx(Dashboard,{onLogout:handleLogout}):/*#__PURE__*/// Show authentication forms for non-authenticated users\n_jsxs(\"div\",{className:\"auth-wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"AWS Cognito Authentication\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Simple and secure user authentication with React\"})]}),currentView==='login'?/*#__PURE__*/_jsx(Login,{onLoginSuccess:handleLoginSuccess,switchToRegister:switchToRegister}):/*#__PURE__*/_jsx(Register,{switchToLogin:switchToLogin})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Amplify","Login","Register","Dashboard","authService","awsConfig","jsx","_jsx","jsxs","_jsxs","configure","App","isAuthenticated","setIsAuthenticated","loading","setLoading","currentView","setCurrentView","checkAuthStatus","authenticated","handleLoginSuccess","user","console","log","username","handleLogout","switchToRegister","switchToLogin","className","children","onLogout","onLoginSuccess"],"sources":["/var/www/html/new_node/src/App.js"],"sourcesContent":["// Main App Component\n// Handles routing between authentication and dashboard pages\n\nimport React, { useState, useEffect } from 'react';\nimport { Amplify } from 'aws-amplify';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport Dashboard from './components/Dashboard';\nimport { authService } from './services/authService';\nimport awsConfig from './config/awsConfig';\nimport './App.css';\n\n// Configure AWS Amplify with our Cognito settings\nAmplify.configure(awsConfig);\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [currentView, setCurrentView] = useState('login'); // 'login' or 'register'\n\n  // Check if user is already authenticated when app loads\n  useEffect(() => {\n    const checkAuthStatus = async () => {\n      const authenticated = await authService.isAuthenticated();\n      setIsAuthenticated(authenticated);\n      setLoading(false);\n    };\n\n    checkAuthStatus();\n  }, []);\n\n  // Handle successful login\n  const handleLoginSuccess = (user) => {\n    console.log('Login successful:', user.username);\n    setIsAuthenticated(true);\n  };\n\n  // Handle logout\n  const handleLogout = () => {\n    console.log('User logged out');\n    setIsAuthenticated(false);\n    setCurrentView('login');\n  };\n\n  // Switch between login and register views\n  const switchToRegister = () => setCurrentView('register');\n  const switchToLogin = () => setCurrentView('login');\n\n  // Show loading spinner while checking authentication\n  if (loading) {\n    return (\n      <div className=\"app\">\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n// // Simulate a 404 error for testing rollback\n// const simulate404 = true;\n\n// if (simulate404) {\n//   // This will render a 404-style error in the UI\n//   return (\n//     <div className=\"app\">\n//       <div className=\"error-page\">\n//         <h1>404 - Page Not Found</h1>\n//         <p>This page does not exist (simulated error for rollback).</p>\n//       </div>\n//     </div>\n//   );\n// }\n\n\n  return (\n    <div className=\"app\">\n      {isAuthenticated ? (\n        // Show dashboard for authenticated users\n        <Dashboard onLogout={handleLogout} />\n      ) : (\n        // Show authentication forms for non-authenticated users\n        <div className=\"auth-wrapper\">\n          <div className=\"app-header\">\n            <h1>AWS Cognito Authentication</h1>\n            <p>Simple and secure user authentication with React</p>\n          </div>\n          \n          {currentView === 'login' ? (\n            <Login \n              onLoginSuccess={handleLoginSuccess}\n              switchToRegister={switchToRegister}\n            />\n          ) : (\n            <Register \n              switchToLogin={switchToLogin}\n            />\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}